<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Celeritas: celeritas::TrackingManagerOffload Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
   TeX: { Macros: {
    dif: "{\\;\\mathrm{d}}",
  } }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../celeritas-square.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Celeritas<span id="projectnumber">&#160;0.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>celeritas</b></li><li class="navelem"><a class="el" href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html">TrackingManagerOffload</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d9/d24/classceleritas_1_1_tracking_manager_offload-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">celeritas::TrackingManagerOffload Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Offload tracks to Celeritas via the per-particle G4VTrackingManager interface.  
 <a href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html#details">More...</a></p>

<p><code>#include &lt;TrackingManagerOffload.hh&gt;</code></p>
<div class="dynheader">
Inheritance diagram for celeritas::TrackingManagerOffload:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/df9/classceleritas_1_1_tracking_manager_offload.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2ab4bca43d778faf4566f8dc4718c579" id="r_a2ab4bca43d778faf4566f8dc4718c579"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html#a2ab4bca43d778faf4566f8dc4718c579">TrackingManagerOffload</a> (<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> const *params, <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html">LocalTransporter</a> *local)</td></tr>
<tr class="memdesc:a2ab4bca43d778faf4566f8dc4718c579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a tracking manager with data needed to offload to Celeritas.  <br /></td></tr>
<tr class="separator:a2ab4bca43d778faf4566f8dc4718c579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab904b42f1f9585ae69d38f28cb043542" id="r_ab904b42f1f9585ae69d38f28cb043542"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html#ab904b42f1f9585ae69d38f28cb043542">PreparePhysicsTable</a> (G4ParticleDefinition const &amp;) override</td></tr>
<tr class="memdesc:ab904b42f1f9585ae69d38f28cb043542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare physics tables for this particle.  <br /></td></tr>
<tr class="separator:ab904b42f1f9585ae69d38f28cb043542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f0bb24a8346cab23890739074a49d7" id="r_a15f0bb24a8346cab23890739074a49d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html#a15f0bb24a8346cab23890739074a49d7">BuildPhysicsTable</a> (G4ParticleDefinition const &amp;) override</td></tr>
<tr class="memdesc:a15f0bb24a8346cab23890739074a49d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build physics tables for this particle.  <br /></td></tr>
<tr class="separator:a15f0bb24a8346cab23890739074a49d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f8e702aa133d16e04f5e0eba402bab" id="r_a47f8e702aa133d16e04f5e0eba402bab"><td class="memItemLeft" align="right" valign="top"><a id="a47f8e702aa133d16e04f5e0eba402bab" name="a47f8e702aa133d16e04f5e0eba402bab"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>HandOverOneTrack</b> (G4Track *aTrack) override</td></tr>
<tr class="memdesc:a47f8e702aa133d16e04f5e0eba402bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offload the incoming track to Celeritas. <br /></td></tr>
<tr class="separator:a47f8e702aa133d16e04f5e0eba402bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad95c07924face788ff7c6f565b5748f1" id="r_ad95c07924face788ff7c6f565b5748f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df9/classceleritas_1_1_tracking_manager_offload.html#ad95c07924face788ff7c6f565b5748f1">FlushEvent</a> () override</td></tr>
<tr class="memdesc:ad95c07924face788ff7c6f565b5748f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete processing of any buffered tracks.  <br /></td></tr>
<tr class="separator:ad95c07924face788ff7c6f565b5748f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Offload tracks to Celeritas via the per-particle G4VTrackingManager interface. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2ab4bca43d778faf4566f8dc4718c579" name="a2ab4bca43d778faf4566f8dc4718c579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ab4bca43d778faf4566f8dc4718c579">&#9670;&#160;</a></span>TrackingManagerOffload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">celeritas::TrackingManagerOffload::TrackingManagerOffload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> const *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html">LocalTransporter</a> *&#160;</td>
          <td class="paramname"><em>local</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a tracking manager with data needed to offload to Celeritas. </p>
<p>TODO: Clarify thread-locality. Construction/addition to <code>G4ParticleDefinition</code> appears to take place on the master thread, typically in the ConstructProcess method, but the tracking manager pointer is part of the split-class data for the particle. It's observed that different threads have distinct pointers to a <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a> instance, and that these match those of the global thread-local instances in test problems. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a15f0bb24a8346cab23890739074a49d7" name="a15f0bb24a8346cab23890739074a49d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f0bb24a8346cab23890739074a49d7">&#9670;&#160;</a></span>BuildPhysicsTable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::TrackingManagerOffload::BuildPhysicsTable </td>
          <td>(</td>
          <td class="paramtype">G4ParticleDefinition const &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build physics tables for this particle. </p>
<p>Messaged by the <code>G4ParticleDefinition</code> who stores us whenever cross-section tables have to be rebuilt (i.e. if new materials have been defined). An override is needed for Celeritas as it uses the particle's process manager and tables to initialize its own physics data for the particle, and this is disabled when a custom tracking manager is used. Note that this also means we could have filters in HandOverOneTrack to hand back the track to the general G4TrackingManager if matching a predicate(s).</p>
<p>The implementation follows that in <code>G4VUserPhysicsList::BuildPhysicsTable</code> , see also Geant4 Extended Example runAndEvent/RE07. </p>

</div>
</div>
<a id="ad95c07924face788ff7c6f565b5748f1" name="ad95c07924face788ff7c6f565b5748f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad95c07924face788ff7c6f565b5748f1">&#9670;&#160;</a></span>FlushEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::TrackingManagerOffload::FlushEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Complete processing of any buffered tracks. </p>
<p>Note that this is called in <code>G4EventManager::DoProcessing(G4Event*)</code> after the after the main tracking loop has completed.</p>
<p>That is done to allow for models that may add "onload" particles back to Geant4. </p>

</div>
</div>
<a id="ab904b42f1f9585ae69d38f28cb043542" name="ab904b42f1f9585ae69d38f28cb043542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab904b42f1f9585ae69d38f28cb043542">&#9670;&#160;</a></span>PreparePhysicsTable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::TrackingManagerOffload::PreparePhysicsTable </td>
          <td>(</td>
          <td class="paramtype">G4ParticleDefinition const &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare physics tables for this particle. </p>
<p>Messaged by the <code>G4ParticleDefinition</code> who stores us whenever cross-section tables have to be rebuilt (i.e. if new materials have been defined). As with BuildPhysicsTable, we override this to ensure all Geant4 process/cross-section data is available for Celeritas to use.</p>
<p>The implementation follows that in <code>G4VUserPhysicsList::PreparePhysicsTable</code> , see also Geant4 Extended Example runAndEvent/RE07. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../de/dcf/_tracking_manager_offload_8hh.html">TrackingManagerOffload.hh</a></li>
<li><a class="el" href="../../dc/d0e/_tracking_manager_offload_8cc.html">TrackingManagerOffload.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>

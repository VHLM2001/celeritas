<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Celeritas: celeritas::MultiExceptionHandler Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
   TeX: { Macros: {
    dif: "{\\;\\mathrm{d}}",
  } }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../celeritas-square.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Celeritas<span id="projectnumber">&#160;0.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>celeritas</b></li><li class="navelem"><a class="el" href="../../d7/d92/classceleritas_1_1_multi_exception_handler.html">MultiExceptionHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d1/dd1/classceleritas_1_1_multi_exception_handler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">celeritas::MultiExceptionHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Temporarily store exception pointers.  
 <a href="../../d7/d92/classceleritas_1_1_multi_exception_handler.html#details">More...</a></p>

<p><code>#include &lt;MultiExceptionHandler.hh&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type aliases</div></td></tr>
<tr class="memitem:afac04a860b9de02e7821b2719d9e4ba2" id="r_afac04a860b9de02e7821b2719d9e4ba2"><td class="memItemLeft" align="right" valign="top"><a id="afac04a860b9de02e7821b2719d9e4ba2" name="afac04a860b9de02e7821b2719d9e4ba2"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>VecExceptionPtr</b> = std::vector&lt; std::exception_ptr &gt;</td></tr>
<tr class="separator:afac04a860b9de02e7821b2719d9e4ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae0050b2650a2884d4479f286484cbc0d" id="r_ae0050b2650a2884d4479f286484cbc0d"><td class="memItemLeft" align="right" valign="top"><a id="ae0050b2650a2884d4479f286484cbc0d" name="ae0050b2650a2884d4479f286484cbc0d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>CELER_DEFAULT_COPY_MOVE</b> (<a class="el" href="../../d7/d92/classceleritas_1_1_multi_exception_handler.html">MultiExceptionHandler</a>)</td></tr>
<tr class="separator:ae0050b2650a2884d4479f286484cbc0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4524f8e27e261c52a875cffc2b225e" id="r_aaa4524f8e27e261c52a875cffc2b225e"><td class="memItemLeft" align="right" valign="top"><a id="aaa4524f8e27e261c52a875cffc2b225e" name="aaa4524f8e27e261c52a875cffc2b225e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~MultiExceptionHandler</b> ()</td></tr>
<tr class="memdesc:aaa4524f8e27e261c52a875cffc2b225e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate if destroyed without handling exceptions. <br /></td></tr>
<tr class="separator:aaa4524f8e27e261c52a875cffc2b225e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d82819ef642fb9b5d57b378269ae04" id="r_a67d82819ef642fb9b5d57b378269ae04"><td class="memItemLeft" align="right" valign="top"><a id="a67d82819ef642fb9b5d57b378269ae04" name="a67d82819ef642fb9b5d57b378269ae04"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>operator()</b> (std::exception_ptr <a class="el" href="../../d7/d3b/_orange_types_8hh.html#a6e38ea21d9877ba8a45b3a6fee0c299ca83878c91171338902e0fe0fb97a8c47a">p</a>)</td></tr>
<tr class="memdesc:a67d82819ef642fb9b5d57b378269ae04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-safe capture of the given exception. <br /></td></tr>
<tr class="separator:a67d82819ef642fb9b5d57b378269ae04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38d55e3c559b8cb2fd1a78c756dfa2b" id="r_ac38d55e3c559b8cb2fd1a78c756dfa2b"><td class="memItemLeft" align="right" valign="top"><a id="ac38d55e3c559b8cb2fd1a78c756dfa2b" name="ac38d55e3c559b8cb2fd1a78c756dfa2b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>empty</b> () const</td></tr>
<tr class="memdesc:ac38d55e3c559b8cb2fd1a78c756dfa2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether no exceptions have been stored (not thread safe) <br /></td></tr>
<tr class="separator:ac38d55e3c559b8cb2fd1a78c756dfa2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f908784c678b9523c066d715bd4ac96" id="r_a3f908784c678b9523c066d715bd4ac96"><td class="memItemLeft" align="right" valign="top"><a id="a3f908784c678b9523c066d715bd4ac96" name="a3f908784c678b9523c066d715bd4ac96"></a>
VecExceptionPtr&#160;</td><td class="memItemRight" valign="bottom"><b>release</b> ()</td></tr>
<tr class="memdesc:a3f908784c678b9523c066d715bd4ac96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release exceptions for someone else to process (not thread safe) <br /></td></tr>
<tr class="separator:a3f908784c678b9523c066d715bd4ac96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Temporarily store exception pointers. </p>
<p>This is useful for storing multiple exceptions in unrelated loops (where one exception shouldn't affect the program flow outside of the scope), especially for OpenMP parallel execution, where exceptions cannot be propagated. </p><div class="fragment"><div class="line"><a class="code hl_class" href="../../d7/d92/classceleritas_1_1_multi_exception_handler.html">MultiExceptionHandler</a> capture_exception;</div>
<div class="line"><span class="preprocessor">#pragma omp parallel for</span></div>
<div class="line"><span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d0/df5/corecel_2_types_8hh.html#a2e255ada6f961f5f241b1d828d7509d9">size_type</a> i = 0; i &lt; data.states.size(); ++i)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_define" href="../../db/dc5/_macros_8hh.html#a572ccbb99d1225e67ed87d234b41f436">CELER_TRY_HANDLE</a>(execute(<a class="code hl_class" href="../../dd/dbb/classceleritas_1_1_opaque_id.html">TrackSlotId</a>{i}), capture_exception);</div>
<div class="line">}</div>
<div class="line">log_and_rethrow(std::move(capture_exception));</div>
<div class="ttc" id="a_macros_8hh_html_a572ccbb99d1225e67ed87d234b41f436"><div class="ttname"><a href="../../db/dc5/_macros_8hh.html#a572ccbb99d1225e67ed87d234b41f436">CELER_TRY_HANDLE</a></div><div class="ttdeci">#define CELER_TRY_HANDLE(STATEMENT, HANDLE_EXCEPTION)</div><div class="ttdoc">&quot;Try&quot; to execute the statement, and &quot;handle&quot; all thrown errors by calling the given function-like err...</div><div class="ttdef"><b>Definition</b> Macros.hh:167</div></div>
<div class="ttc" id="aclassceleritas_1_1_multi_exception_handler_html"><div class="ttname"><a href="../../d7/d92/classceleritas_1_1_multi_exception_handler.html">celeritas::MultiExceptionHandler</a></div><div class="ttdoc">Temporarily store exception pointers.</div><div class="ttdef"><b>Definition</b> MultiExceptionHandler.hh:43</div></div>
<div class="ttc" id="aclassceleritas_1_1_opaque_id_html"><div class="ttname"><a href="../../dd/dbb/classceleritas_1_1_opaque_id.html">celeritas::OpaqueId&lt; struct TrackSlot_ &gt;</a></div></div>
<div class="ttc" id="acorecel_2_types_8hh_html_a2e255ada6f961f5f241b1d828d7509d9"><div class="ttname"><a href="../../d0/df5/corecel_2_types_8hh.html#a2e255ada6f961f5f241b1d828d7509d9">celeritas::size_type</a></div><div class="ttdeci">unsigned int size_type</div><div class="ttdoc">Standard type for container sizes, optimized for GPU use.</div><div class="ttdef"><b>Definition</b> corecel/Types.hh:20</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This class implements an OpenMP <code>critical</code> mutex, not a <code>std</code> mutex. If using this class in a <code>std::thread</code> context, wrap the call operator in a lambda with a <code>std::scoped_lock</code> . We could refactor as a CRTP class with a protected <code>push_back</code> function that lets us specialize the mutex implementation. </dd></dl>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d5/d5d/_multi_exception_handler_8hh.html">MultiExceptionHandler.hh</a></li>
<li><a class="el" href="../../d6/d08/_multi_exception_handler_8cc.html">MultiExceptionHandler.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>

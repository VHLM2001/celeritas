<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Celeritas: celeritas::detail::MscStepToGeo Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
   TeX: { Macros: {
    dif: "{\\;\\mathrm{d}}",
  } }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../celeritas-square.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Celeritas<span id="projectnumber">&#160;0.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>celeritas</b></li><li class="navelem"><b>detail</b></li><li class="navelem"><a class="el" href="../../d9/d97/classceleritas_1_1detail_1_1_msc_step_to_geo.html">MscStepToGeo</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../de/dbb/classceleritas_1_1detail_1_1_msc_step_to_geo-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">celeritas::detail::MscStepToGeo Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Convert the "true" path traveled to a geometrical approximation.  
 <a href="../../d9/d97/classceleritas_1_1detail_1_1_msc_step_to_geo.html#details">More...</a></p>

<p><code>#include &lt;MscStepToGeo.hh&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da1/structceleritas_1_1detail_1_1_msc_step_to_geo_1_1result__type.html">result_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type aliases</div></td></tr>
<tr class="memitem:ac371c087a3dafe17c0343a487a88e7ac" id="r_ac371c087a3dafe17c0343a487a88e7ac"><td class="memItemLeft" align="right" valign="top"><a id="ac371c087a3dafe17c0343a487a88e7ac" name="ac371c087a3dafe17c0343a487a88e7ac"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Energy</b> = <a class="el" href="../../dc/dff/classceleritas_1_1_quantity.html">units::MevEnergy</a></td></tr>
<tr class="separator:ac371c087a3dafe17c0343a487a88e7ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761d6c40d8fec7f288550b19162facf1" id="r_a761d6c40d8fec7f288550b19162facf1"><td class="memItemLeft" align="right" valign="top"><a id="a761d6c40d8fec7f288550b19162facf1" name="a761d6c40d8fec7f288550b19162facf1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Mass</b> = <a class="el" href="../../dc/dff/classceleritas_1_1_quantity.html">units::MevMass</a></td></tr>
<tr class="separator:a761d6c40d8fec7f288550b19162facf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d8dee37ed66bc7f848cbe65c62e6cb" id="r_a54d8dee37ed66bc7f848cbe65c62e6cb"><td class="memItemLeft" align="right" valign="top"><a id="a54d8dee37ed66bc7f848cbe65c62e6cb" name="a54d8dee37ed66bc7f848cbe65c62e6cb"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>UrbanMscRef</b> = <a class="el" href="../../d0/df5/corecel_2_types_8hh.html#a35e5b1955aa5d7269b34c6f5044b3b69">NativeCRef</a>&lt; <a class="el" href="../../dd/d80/structceleritas_1_1_urban_msc_data.html">UrbanMscData</a> &gt;</td></tr>
<tr class="separator:a54d8dee37ed66bc7f848cbe65c62e6cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a002fca87b6040ab57a0e59674b4788ac" id="r_a002fca87b6040ab57a0e59674b4788ac"><td class="memItemLeft" align="right" valign="top"><a id="a002fca87b6040ab57a0e59674b4788ac" name="a002fca87b6040ab57a0e59674b4788ac"></a>
<a class="el" href="../../db/dc5/_macros_8hh.html#ac631c1bc86fa5c49ade05cca94ae1794">CELER_FUNCTION</a>&#160;</td><td class="memItemRight" valign="bottom"><b>MscStepToGeo</b> (UrbanMscRef const &amp;shared, <a class="el" href="../../dc/da3/classceleritas_1_1detail_1_1_urban_msc_helper.html">UrbanMscHelper</a> const &amp;helper, <a class="el" href="../../dc/dff/classceleritas_1_1_quantity.html">Energy</a> energy, <a class="el" href="../../d0/df5/corecel_2_types_8hh.html#ac97c7d9259eb113cfcc54c671fd2173d">real_type</a> <a class="el" href="../../d4/db9/_import_physics_table_8hh.html#ade92a0a20d624cf5bb80797e1fe627f3a945f3fc449518a73b9f5f32868db466c">lambda</a>, <a class="el" href="../../d0/df5/corecel_2_types_8hh.html#ac97c7d9259eb113cfcc54c671fd2173d">real_type</a> <a class="el" href="../../d3/de4/_range_8hh.html#ab0cbada3863bdcf343e220afc3bff860">range</a>)</td></tr>
<tr class="memdesc:a002fca87b6040ab57a0e59674b4788ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct from MSC data. <br /></td></tr>
<tr class="separator:a002fca87b6040ab57a0e59674b4788ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03722a7b9c9754722877e94e2a5e4e10" id="r_a03722a7b9c9754722877e94e2a5e4e10"><td class="memItemLeft" align="right" valign="top"><a id="a03722a7b9c9754722877e94e2a5e4e10" name="a03722a7b9c9754722877e94e2a5e4e10"></a>
<a class="el" href="../../db/dc5/_macros_8hh.html#ac631c1bc86fa5c49ade05cca94ae1794">CELER_FUNCTION</a> <a class="el" href="../../d4/da1/structceleritas_1_1detail_1_1_msc_step_to_geo_1_1result__type.html">result_type</a>&#160;</td><td class="memItemRight" valign="bottom"><b>operator()</b> (<a class="el" href="../../d0/df5/corecel_2_types_8hh.html#ac97c7d9259eb113cfcc54c671fd2173d">real_type</a> tstep) const</td></tr>
<tr class="memdesc:a03722a7b9c9754722877e94e2a5e4e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the geometry step length for a given true step length. <br /></td></tr>
<tr class="separator:a03722a7b9c9754722877e94e2a5e4e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Convert the "true" path traveled to a geometrical approximation. </p>
<p>This takes the physical step limit&mdash;whether limited by range, physics interaction, or an MSC step limiter&mdash;and converts it to a "geometrical" path length, which is a smooth curve (straight if in the absence of a magnetic field).</p>
<p>The mean value of the geometrical path length \( z \) (the first moment) corresponding to a given true path length \( t \) is given by  </p><p class="formulaDsp">
\[
    \langle z \rangle = \lambda_{1} [ 1 - \exp({-\frac{t}{\lambda_{1}}})]
\]
</p>
<p> where \(\lambda_{1}\) is the first transport mean free path. Due to the fact that \(\lambda_{1}\) depends on the kinetic energy of the path and decreases along the step, the path length correction is approximated as  </p><p class="formulaDsp">
\[
    \lambda_{1} (t) = \lambda_{10} (1 - \alpha t)
\]
</p>
<p> where \( \alpha = \frac{\lambda_{10} - \lambda_{11}}{t\lambda_{10}} \) or \( \alpha = 1/r_0 \) in a simpler form with the range \( r_0 \) if the kinetic energy of the particle is below its mass - \( \lambda_{10} (\lambda_{11}) \) denotes the value of \(\lambda_{1}\) at the start (end) of the step, respectively.</p>
<p>Since the MSC cross section decreases as the energy increases, \(
\lambda_{10} \) will be larger than \( \lambda_{11} \) and \( \alpha \) will be positive. However, in the Geant4 Urban MSC model, different methods are used to calculate the cross section above and below 10 MeV. In the higher energy region the cross sections are identical for electrons and positrons, resulting in a discontinuity in the positron cross section at 10 MeV. This means on fine energy grids it's possible for the cross section to be <em>increasing</em> with energy just above the 10 MeV threshold and therefore for \( \alpha \) is negative.</p>
<p>The resulting geometrical step length <em>can</em> be greater than 1 MFP: it's the MSC step limiter's job to add additional restrictions.</p>
<dl class="section note"><dt>Note</dt><dd>This performs the same method as in ComputeGeomPathLength of G4UrbanMscModel of the Geant4 10.7 release. </dd></dl>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../d8/dae/_msc_step_to_geo_8hh.html">MscStepToGeo.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>

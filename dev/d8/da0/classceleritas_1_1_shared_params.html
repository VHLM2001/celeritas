<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Celeritas: celeritas::SharedParams Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../celeritas-thumbnail.png"/></td>
  <td id="projectalign">
   <div id="projectname">Celeritas<span id="projectnumber">&#160;v0.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>celeritas</b></li><li class="navelem"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../dd/d85/classceleritas_1_1_shared_params-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">celeritas::SharedParams Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Shared (one instance for all threads) Celeritas problem data.  
 <a href="../../d8/da0/classceleritas_1_1_shared_params.html#details">More...</a></p>

<p><code>#include &lt;SharedParams.hh&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type aliases</div></td></tr>
<tr class="memitem:ad4a79dac7799b7b9d29bc7bed05d769f"><td class="memItemLeft" align="right" valign="top"><a id="ad4a79dac7799b7b9d29bc7bed05d769f" name="ad4a79dac7799b7b9d29bc7bed05d769f"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPConstParams</b> = std::shared_ptr&lt; <a class="el" href="../../de/d76/classceleritas_1_1_core_params.html">CoreParams</a> const  &gt;</td></tr>
<tr class="separator:ad4a79dac7799b7b9d29bc7bed05d769f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab9d6b4b4d5d3e1d59d3c53d7e65928da"><td class="memItemLeft" align="right" valign="top"><a id="ab9d6b4b4d5d3e1d59d3c53d7e65928da" name="ab9d6b4b4d5d3e1d59d3c53d7e65928da"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SharedParams</b> (<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ab9d6b4b4d5d3e1d59d3c53d7e65928da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad556cbdafd1a1c79743547d8d660a354"><td class="memItemLeft" align="right" valign="top"><a id="ad556cbdafd1a1c79743547d8d660a354" name="ad556cbdafd1a1c79743547d8d660a354"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SharedParams</b> (<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> const &amp;)=default</td></tr>
<tr class="separator:ad556cbdafd1a1c79743547d8d660a354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007f0304d8973fc9ecf4f60d67028a34"><td class="memItemLeft" align="right" valign="top"><a id="a007f0304d8973fc9ecf4f60d67028a34" name="a007f0304d8973fc9ecf4f60d67028a34"></a>
<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a007f0304d8973fc9ecf4f60d67028a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae633142df20b8654807abde4426c796a"><td class="memItemLeft" align="right" valign="top"><a id="ae633142df20b8654807abde4426c796a" name="ae633142df20b8654807abde4426c796a"></a>
<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a> const &amp;)=default</td></tr>
<tr class="separator:ae633142df20b8654807abde4426c796a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a232e959edac2fe9cb5e1d8659eb89f71"><td class="memItemLeft" align="right" valign="top"><a id="a232e959edac2fe9cb5e1d8659eb89f71" name="a232e959edac2fe9cb5e1d8659eb89f71"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~SharedParams</b> ()</td></tr>
<tr class="memdesc:a232e959edac2fe9cb5e1d8659eb89f71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:a232e959edac2fe9cb5e1d8659eb89f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d49c00144e068e263440f82868831e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html#af6d49c00144e068e263440f82868831e">SharedParams</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:af6d49c00144e068e263440f82868831e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up Celeritas using Geant4 data.  <a href="../../d8/da0/classceleritas_1_1_shared_params.html#af6d49c00144e068e263440f82868831e">More...</a><br /></td></tr>
<tr class="separator:af6d49c00144e068e263440f82868831e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42515175bd6bde1d71020b97186bd658"><td class="memItemLeft" align="right" valign="top"><a id="a42515175bd6bde1d71020b97186bd658" name="a42515175bd6bde1d71020b97186bd658"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Initialize</b> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:a42515175bd6bde1d71020b97186bd658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper for making initialization more obvious from user code. <br /></td></tr>
<tr class="separator:a42515175bd6bde1d71020b97186bd658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457bb14844e246f21704647e4019077a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html#a457bb14844e246f21704647e4019077a">Finalize</a> ()</td></tr>
<tr class="memdesc:a457bb14844e246f21704647e4019077a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear shared data after writing out diagnostics.  <a href="../../d8/da0/classceleritas_1_1_shared_params.html#a457bb14844e246f21704647e4019077a">More...</a><br /></td></tr>
<tr class="separator:a457bb14844e246f21704647e4019077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="memItemLeft" align="right" valign="top">SPConstParams&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html#a7c5ac0c6ae4a9e40496b3bf6773a608f">Params</a> () const</td></tr>
<tr class="memdesc:a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access Celeritas data.  <a href="../../d8/da0/classceleritas_1_1_shared_params.html#a7c5ac0c6ae4a9e40496b3bf6773a608f">More...</a><br /></td></tr>
<tr class="separator:a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="memItemLeft" align="right" valign="top"><a id="aa7bfe6c0dd81faa8f7cf167184d7c34e" name="aa7bfe6c0dd81faa8f7cf167184d7c34e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>operator bool</b> () const</td></tr>
<tr class="memdesc:aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this instance is initialized. <br /></td></tr>
<tr class="separator:aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a78beb9d97addd34e2766b78f1dbbfca0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html#a78beb9d97addd34e2766b78f1dbbfca0">InitializeWorker</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:a78beb9d97addd34e2766b78f1dbbfca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">On worker threads, set up data with thread storage duration.  <a href="../../d8/da0/classceleritas_1_1_shared_params.html#a78beb9d97addd34e2766b78f1dbbfca0">More...</a><br /></td></tr>
<tr class="separator:a78beb9d97addd34e2766b78f1dbbfca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Shared (one instance for all threads) Celeritas problem data. </p>
<p >This should be instantiated on the master thread during problem setup, preferably as a shared pointer. The shared pointer should be passed to a thread-local <code><a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a></code> instance. At the beginning of the run, after Geant4 has initialized physics data, the <code>Initialize</code> method must be called first on the "master" thread to populate the Celeritas data structures (geometry, physics). <code>InitializeWorker</code> must subsequently be invoked on all worker threads to set up thread-local data (specifically, CUDA device initialization). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af6d49c00144e068e263440f82868831e" name="af6d49c00144e068e263440f82868831e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d49c00144e068e263440f82868831e">&#9670;&#160;</a></span>SharedParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">celeritas::SharedParams::SharedParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set up Celeritas using Geant4 data. </p>
<p >This is a separate step from construction because it has to happen at the beginning of the run, not when user classes are created. It should be called from the "master" thread (for MT mode) or from the main thread (for Serial), and it must complete before any worker thread tries to access the shared data. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a457bb14844e246f21704647e4019077a" name="a457bb14844e246f21704647e4019077a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457bb14844e246f21704647e4019077a">&#9670;&#160;</a></span>Finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::Finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear shared data after writing out diagnostics. </p>
<p >This must be executed exactly <em>once</em> across all threads and at the end of the run. </p>

</div>
</div>
<a id="a78beb9d97addd34e2766b78f1dbbfca0" name="a78beb9d97addd34e2766b78f1dbbfca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78beb9d97addd34e2766b78f1dbbfca0">&#9670;&#160;</a></span>InitializeWorker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::InitializeWorker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>On worker threads, set up data with thread storage duration. </p>
<p >Some data that has "static" storage duration (such as CUDA device properties) in single-thread mode has "thread" storage in a multithreaded application. It must be initialized on all threads. </p>

</div>
</div>
<a id="a7c5ac0c6ae4a9e40496b3bf6773a608f" name="a7c5ac0c6ae4a9e40496b3bf6773a608f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5ac0c6ae4a9e40496b3bf6773a608f">&#9670;&#160;</a></span>Params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto celeritas::SharedParams::Params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access Celeritas data. </p>
<p >This can only be called after <code>Initialize</code>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d7/d8f/_shared_params_8hh.html">SharedParams.hh</a></li>
<li><a class="el" href="../../d4/d8b/_shared_params_8cc.html">SharedParams.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>

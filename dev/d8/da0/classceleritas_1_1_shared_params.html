<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Celeritas: celeritas::SharedParams Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
   TeX: { Macros: {
    dif: "{\\;\\mathrm{d}}",
  } }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../celeritas-square.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Celeritas<span id="projectnumber">&#160;0.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>celeritas</b></li><li class="navelem"><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html">SharedParams</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="../../dd/d85/classceleritas_1_1_shared_params-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">celeritas::SharedParams Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Shared (one instance for all threads) Celeritas problem data.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;SharedParams.hh&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type aliases</div></td></tr>
<tr class="memitem:ad4a79dac7799b7b9d29bc7bed05d769f" id="r_ad4a79dac7799b7b9d29bc7bed05d769f"><td class="memItemLeft" align="right" valign="top"><a id="ad4a79dac7799b7b9d29bc7bed05d769f" name="ad4a79dac7799b7b9d29bc7bed05d769f"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPConstParams</b> = std::shared_ptr&lt;<a class="el" href="../../de/d76/classceleritas_1_1_core_params.html">CoreParams</a> const&gt;</td></tr>
<tr class="separator:ad4a79dac7799b7b9d29bc7bed05d769f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17fb372e6d63bbf548dba8b7db66bb0" id="r_ad17fb372e6d63bbf548dba8b7db66bb0"><td class="memItemLeft" align="right" valign="top"><a id="ad17fb372e6d63bbf548dba8b7db66bb0" name="ad17fb372e6d63bbf548dba8b7db66bb0"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>VecG4ParticleDef</b> = std::vector&lt;G4ParticleDefinition const*&gt;</td></tr>
<tr class="separator:ad17fb372e6d63bbf548dba8b7db66bb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Accessors</div></td></tr>
<tr class="memitem:a7c5ac0c6ae4a9e40496b3bf6773a608f" id="r_a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="memItemLeft" align="right" valign="top">SPConstParams&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c5ac0c6ae4a9e40496b3bf6773a608f">Params</a> () const</td></tr>
<tr class="memdesc:a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access Celeritas data.  <br /></td></tr>
<tr class="separator:a7c5ac0c6ae4a9e40496b3bf6773a608f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d27b45e6aad036fca34db0fc15576a7" id="r_a8d27b45e6aad036fca34db0fc15576a7"><td class="memItemLeft" align="right" valign="top"><a id="a8d27b45e6aad036fca34db0fc15576a7" name="a8d27b45e6aad036fca34db0fc15576a7"></a>
VecG4ParticleDef const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>OffloadParticles</b> () const</td></tr>
<tr class="memdesc:a8d27b45e6aad036fca34db0fc15576a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a vector of particles supported by Celeritas offloading. <br /></td></tr>
<tr class="separator:a8d27b45e6aad036fca34db0fc15576a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bfe6c0dd81faa8f7cf167184d7c34e" id="r_aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="memItemLeft" align="right" valign="top"><a id="aa7bfe6c0dd81faa8f7cf167184d7c34e" name="aa7bfe6c0dd81faa8f7cf167184d7c34e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>operator bool</b> () const</td></tr>
<tr class="memdesc:aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether Celeritas core params have been created. <br /></td></tr>
<tr class="separator:aa7bfe6c0dd81faa8f7cf167184d7c34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Internal use only</h2></td></tr>
<tr class="memitem:aac2438c355b4dc01880da331e525aed3" id="r_aac2438c355b4dc01880da331e525aed3"><td class="memItemLeft" align="right" valign="top"><a id="aac2438c355b4dc01880da331e525aed3" name="aac2438c355b4dc01880da331e525aed3"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPHitManager</b> = std::shared_ptr&lt;<a class="el" href="../../d9/d84/classceleritas_1_1detail_1_1_hit_manager.html">detail::HitManager</a>&gt;</td></tr>
<tr class="memdesc:aac2438c355b4dc01880da331e525aed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit manager, to be used only by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:aac2438c355b4dc01880da331e525aed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace3865257b1a3cc67870105caf9aeff2" id="r_ace3865257b1a3cc67870105caf9aeff2"><td class="memItemLeft" align="right" valign="top"><a id="ace3865257b1a3cc67870105caf9aeff2" name="ace3865257b1a3cc67870105caf9aeff2"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPOffloadWriter</b> = std::shared_ptr&lt;<a class="el" href="../../dd/d0d/classceleritas_1_1detail_1_1_offload_writer.html">detail::OffloadWriter</a>&gt;</td></tr>
<tr class="memdesc:ace3865257b1a3cc67870105caf9aeff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit manager, to be used only by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:ace3865257b1a3cc67870105caf9aeff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac63afa3c04346de11f1c85efefb45f9" id="r_aac63afa3c04346de11f1c85efefb45f9"><td class="memItemLeft" align="right" valign="top"><a id="aac63afa3c04346de11f1c85efefb45f9" name="aac63afa3c04346de11f1c85efefb45f9"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPOutputRegistry</b> = std::shared_ptr&lt;<a class="el" href="../../df/d71/classceleritas_1_1_output_registry.html">OutputRegistry</a>&gt;</td></tr>
<tr class="memdesc:aac63afa3c04346de11f1c85efefb45f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit manager, to be used only by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:aac63afa3c04346de11f1c85efefb45f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d78bbfc567a8028a5510d29581d303" id="r_a47d78bbfc567a8028a5510d29581d303"><td class="memItemLeft" align="right" valign="top"><a id="a47d78bbfc567a8028a5510d29581d303" name="a47d78bbfc567a8028a5510d29581d303"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>SPConstGeantGeoParams</b> = std::shared_ptr&lt;<a class="el" href="../../df/d26/classceleritas_1_1_geant_geo_params.html">GeantGeoParams</a> const&gt;</td></tr>
<tr class="memdesc:a47d78bbfc567a8028a5510d29581d303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit manager, to be used only by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:a47d78bbfc567a8028a5510d29581d303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acc769ac2a704ff9372a032339791a2" id="r_a4acc769ac2a704ff9372a032339791a2"><td class="memItemLeft" align="right" valign="top"><a id="a4acc769ac2a704ff9372a032339791a2" name="a4acc769ac2a704ff9372a032339791a2"></a>
<a class="el" href="#aac2438c355b4dc01880da331e525aed3">SPHitManager</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>hit_manager</b> () const</td></tr>
<tr class="memdesc:a4acc769ac2a704ff9372a032339791a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit manager, to be used only by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:a4acc769ac2a704ff9372a032339791a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4768a54a0a026abfdd0cf37ff274c4a2" id="r_a4768a54a0a026abfdd0cf37ff274c4a2"><td class="memItemLeft" align="right" valign="top"><a id="a4768a54a0a026abfdd0cf37ff274c4a2" name="a4768a54a0a026abfdd0cf37ff274c4a2"></a>
<a class="el" href="#ace3865257b1a3cc67870105caf9aeff2">SPOffloadWriter</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>offload_writer</b> () const</td></tr>
<tr class="memdesc:a4768a54a0a026abfdd0cf37ff274c4a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional offload writer, only for use by <a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a>. <br /></td></tr>
<tr class="separator:a4768a54a0a026abfdd0cf37ff274c4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce1e59c897c57a8177886202868261d" id="r_a8ce1e59c897c57a8177886202868261d"><td class="memItemLeft" align="right" valign="top"><a id="a8ce1e59c897c57a8177886202868261d" name="a8ce1e59c897c57a8177886202868261d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>num_streams</b> () const</td></tr>
<tr class="memdesc:a8ce1e59c897c57a8177886202868261d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lazily obtained number of streams. <br /></td></tr>
<tr class="separator:a8ce1e59c897c57a8177886202868261d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1fbb093c283047f5cf3e5e22a3f67f" id="r_a0f1fbb093c283047f5cf3e5e22a3f67f"><td class="memItemLeft" align="right" valign="top"><a id="a0f1fbb093c283047f5cf3e5e22a3f67f" name="a0f1fbb093c283047f5cf3e5e22a3f67f"></a>
<a class="el" href="#aac63afa3c04346de11f1c85efefb45f9">SPOutputRegistry</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>output_reg</b> () const</td></tr>
<tr class="memdesc:a0f1fbb093c283047f5cf3e5e22a3f67f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lazily created output registry. <br /></td></tr>
<tr class="separator:a0f1fbb093c283047f5cf3e5e22a3f67f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde209150f875511ea9b696818a5b926" id="r_adde209150f875511ea9b696818a5b926"><td class="memItemLeft" align="right" valign="top"><a id="adde209150f875511ea9b696818a5b926" name="adde209150f875511ea9b696818a5b926"></a>
<a class="el" href="#a47d78bbfc567a8028a5510d29581d303">SPConstGeantGeoParams</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>geant_geo_params</b> () const</td></tr>
<tr class="memdesc:adde209150f875511ea9b696818a5b926"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lazily created Geant geometry parameters. <br /></td></tr>
<tr class="separator:adde209150f875511ea9b696818a5b926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc596969ab7343c42a09983320ebe05" id="r_a7fc596969ab7343c42a09983320ebe05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fc596969ab7343c42a09983320ebe05">SharedParams</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options, <a class="el" href="#aac63afa3c04346de11f1c85efefb45f9">SPOutputRegistry</a> reg)</td></tr>
<tr class="memdesc:a7fc596969ab7343c42a09983320ebe05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up Celeritas using Geant4 data and existing output registery.  <br /></td></tr>
<tr class="separator:a7fc596969ab7343c42a09983320ebe05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe5e8874aa18c50464fa7de844beb7b" id="r_a5fe5e8874aa18c50464fa7de844beb7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5fe5e8874aa18c50464fa7de844beb7b">Initialize</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options, <a class="el" href="#aac63afa3c04346de11f1c85efefb45f9">SPOutputRegistry</a> reg)</td></tr>
<tr class="memdesc:a5fe5e8874aa18c50464fa7de844beb7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize shared data with existing output registry.  <br /></td></tr>
<tr class="separator:a5fe5e8874aa18c50464fa7de844beb7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85051dfabec084c8771bdcba24a54e2f" id="r_a85051dfabec084c8771bdcba24a54e2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85051dfabec084c8771bdcba24a54e2f">set_output_filename</a> (std::string const &amp;)</td></tr>
<tr class="memdesc:a85051dfabec084c8771bdcba24a54e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a diagnostic output filename from a Geant4 app when Celeritas is off.  <br /></td></tr>
<tr class="separator:a85051dfabec084c8771bdcba24a54e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Construction</h2></td></tr>
<tr class="memitem:ae022dc9c8155f292819c523d816e0ec2" id="r_ae022dc9c8155f292819c523d816e0ec2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae022dc9c8155f292819c523d816e0ec2">CeleritasDisabled</a> ()</td></tr>
<tr class="memdesc:ae022dc9c8155f292819c523d816e0ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">On worker threads, set up data with thread storage duration.  <br /></td></tr>
<tr class="separator:ae022dc9c8155f292819c523d816e0ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2764e1745864fcdc527164eae757329e" id="r_a2764e1745864fcdc527164eae757329e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2764e1745864fcdc527164eae757329e">KillOffloadTracks</a> ()</td></tr>
<tr class="memdesc:a2764e1745864fcdc527164eae757329e"><td class="mdescLeft">&#160;</td><td class="mdescRight">On worker threads, set up data with thread storage duration.  <br /></td></tr>
<tr class="separator:a2764e1745864fcdc527164eae757329e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78beb9d97addd34e2766b78f1dbbfca0" id="r_a78beb9d97addd34e2766b78f1dbbfca0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78beb9d97addd34e2766b78f1dbbfca0">InitializeWorker</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:a78beb9d97addd34e2766b78f1dbbfca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">On worker threads, set up data with thread storage duration.  <br /></td></tr>
<tr class="separator:a78beb9d97addd34e2766b78f1dbbfca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505bbc17eb3683de90121c7a6c2f1545" id="r_a505bbc17eb3683de90121c7a6c2f1545"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a505bbc17eb3683de90121c7a6c2f1545">SharedParams</a> ()=default</td></tr>
<tr class="memdesc:a505bbc17eb3683de90121c7a6c2f1545"><td class="mdescLeft">&#160;</td><td class="mdescRight">On worker threads, set up data with thread storage duration.  <br /></td></tr>
<tr class="separator:a505bbc17eb3683de90121c7a6c2f1545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d49c00144e068e263440f82868831e" id="r_af6d49c00144e068e263440f82868831e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6d49c00144e068e263440f82868831e">SharedParams</a> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:af6d49c00144e068e263440f82868831e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up Celeritas using Geant4 data.  <br /></td></tr>
<tr class="separator:af6d49c00144e068e263440f82868831e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42515175bd6bde1d71020b97186bd658" id="r_a42515175bd6bde1d71020b97186bd658"><td class="memItemLeft" align="right" valign="top"><a id="a42515175bd6bde1d71020b97186bd658" name="a42515175bd6bde1d71020b97186bd658"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Initialize</b> (<a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;options)</td></tr>
<tr class="memdesc:a42515175bd6bde1d71020b97186bd658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper for making initialization more obvious from user code. <br /></td></tr>
<tr class="separator:a42515175bd6bde1d71020b97186bd658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457bb14844e246f21704647e4019077a" id="r_a457bb14844e246f21704647e4019077a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a457bb14844e246f21704647e4019077a">Finalize</a> ()</td></tr>
<tr class="memdesc:a457bb14844e246f21704647e4019077a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear shared data after writing out diagnostics.  <br /></td></tr>
<tr class="separator:a457bb14844e246f21704647e4019077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Shared (one instance for all threads) Celeritas problem data. </p>
<p>The <code>CeleritasDisabled</code> accessor queries the <code>CELER_DISABLE</code> environment variable as a global option for disabling Celeritas offloading. This is implemented by <code><a class="el" href="../../d3/d72/classceleritas_1_1_simple_offload.html" title="Compressed interface for running Celeritas in a multithread Geant4 app.">SimpleOffload</a></code> </p>
<p>This should be instantiated on the master thread during problem setup, preferably as a shared pointer. The shared pointer should be passed to a thread-local <code><a class="el" href="../../d2/d13/classceleritas_1_1_local_transporter.html" title="Manage offloading of tracks to Celeritas.">LocalTransporter</a></code> instance. At the beginning of the run, after Geant4 has initialized physics data, the <code>Initialize</code> method must be called first on the "master" thread to populate the Celeritas data structures (geometry, physics). <code>InitializeWorker</code> must subsequently be invoked on all worker threads to set up thread-local data (specifically, CUDA device initialization).</p>
<p>Some low-level objects, such as the output diagnostics and Geant4 geometry wrapper, can be created independently of Celeritas being enabled. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a505bbc17eb3683de90121c7a6c2f1545" name="a505bbc17eb3683de90121c7a6c2f1545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505bbc17eb3683de90121c7a6c2f1545">&#9670;&#160;</a></span>SharedParams() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">celeritas::SharedParams::SharedParams </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>On worker threads, set up data with thread storage duration. </p>
<p>Some data that has "static" storage duration (such as CUDA device properties) in single-thread mode has "thread" storage in a multithreaded application. It must be initialized on all threads. </p>

</div>
</div>
<a id="af6d49c00144e068e263440f82868831e" name="af6d49c00144e068e263440f82868831e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d49c00144e068e263440f82868831e">&#9670;&#160;</a></span>SharedParams() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">celeritas::SharedParams::SharedParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set up Celeritas using Geant4 data. </p>
<p>This is a separate step from construction because it has to happen at the beginning of the run, not when user classes are created. It should be called from the "master" thread (for MT mode) or from the main thread (for Serial), and it must complete before any worker thread tries to access the shared data. </p>

</div>
</div>
<a id="a7fc596969ab7343c42a09983320ebe05" name="a7fc596969ab7343c42a09983320ebe05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc596969ab7343c42a09983320ebe05">&#9670;&#160;</a></span>SharedParams() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">celeritas::SharedParams::SharedParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#aac63afa3c04346de11f1c85efefb45f9">SPOutputRegistry</a></td>          <td class="paramname"><span class="paramname"><em>oreg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up Celeritas using Geant4 data and existing output registery. </p>
<p>A design oversight in the <code><a class="el" href="../../d3/d7c/classceleritas_1_1_geant_simple_calo.html" title="Manage a simple calorimeter sensitive detector across threads.">GeantSimpleCalo</a></code> means that the action registry <em>must</em> be created before <code><a class="el" href="../../d8/da0/classceleritas_1_1_shared_params.html" title="Shared (one instance for all threads) Celeritas problem data.">SharedParams</a></code> is initialized, and in the case where Celeritas is not disabled, initialization clears the existing registry. This prevents the calorimeter from writing output. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae022dc9c8155f292819c523d816e0ec2" name="ae022dc9c8155f292819c523d816e0ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae022dc9c8155f292819c523d816e0ec2">&#9670;&#160;</a></span>CeleritasDisabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool celeritas::SharedParams::CeleritasDisabled </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>On worker threads, set up data with thread storage duration. </p>
<p>Some data that has "static" storage duration (such as CUDA device properties) in single-thread mode has "thread" storage in a multithreaded application. It must be initialized on all threads. </p>

</div>
</div>
<a id="a457bb14844e246f21704647e4019077a" name="a457bb14844e246f21704647e4019077a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457bb14844e246f21704647e4019077a">&#9670;&#160;</a></span>Finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::Finalize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear shared data after writing out diagnostics. </p>
<p>This should be executed exactly <em>once</em> across all threads and at the end of the run. </p>

</div>
</div>
<a id="a5fe5e8874aa18c50464fa7de844beb7b" name="a5fe5e8874aa18c50464fa7de844beb7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe5e8874aa18c50464fa7de844beb7b">&#9670;&#160;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#aac63afa3c04346de11f1c85efefb45f9">SPOutputRegistry</a></td>          <td class="paramname"><span class="paramname"><em>reg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize shared data with existing output registry. </p>
<p>TODO: this is a hack to be deleted in v0.5. </p>

</div>
</div>
<a id="a78beb9d97addd34e2766b78f1dbbfca0" name="a78beb9d97addd34e2766b78f1dbbfca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78beb9d97addd34e2766b78f1dbbfca0">&#9670;&#160;</a></span>InitializeWorker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::InitializeWorker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/df4/structceleritas_1_1_setup_options.html">SetupOptions</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>On worker threads, set up data with thread storage duration. </p>
<p>Some data that has "static" storage duration (such as CUDA device properties) in single-thread mode has "thread" storage in a multithreaded application. It must be initialized on all threads. </p>

</div>
</div>
<a id="a2764e1745864fcdc527164eae757329e" name="a2764e1745864fcdc527164eae757329e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2764e1745864fcdc527164eae757329e">&#9670;&#160;</a></span>KillOffloadTracks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool celeritas::SharedParams::KillOffloadTracks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>On worker threads, set up data with thread storage duration. </p>
<p>Some data that has "static" storage duration (such as CUDA device properties) in single-thread mode has "thread" storage in a multithreaded application. It must be initialized on all threads. </p>

</div>
</div>
<a id="a7c5ac0c6ae4a9e40496b3bf6773a608f" name="a7c5ac0c6ae4a9e40496b3bf6773a608f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5ac0c6ae4a9e40496b3bf6773a608f">&#9670;&#160;</a></span>Params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto celeritas::SharedParams::Params </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access Celeritas data. </p>
<p>This can only be called after <code>Initialize</code>. </p>

</div>
</div>
<a id="a85051dfabec084c8771bdcba24a54e2f" name="a85051dfabec084c8771bdcba24a54e2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85051dfabec084c8771bdcba24a54e2f">&#9670;&#160;</a></span>set_output_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void celeritas::SharedParams::set_output_filename </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a diagnostic output filename from a Geant4 app when Celeritas is off. </p>
<p>This will be overwritten when calling Initialized with setup options.</p>
<p>TODO: this hack should be deleted in v0.5. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d7/d8f/_shared_params_8hh.html">SharedParams.hh</a></li>
<li><a class="el" href="../../d4/d8b/_shared_params_8cc.html">SharedParams.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
